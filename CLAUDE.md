# claude.md
# 依頼の目的：Vibe-Codingの有効性検証プロジェクト（実験記録準備）

**このリポジトリ: グループ B (With-Arch) - クリーンアーキテクチャ/DDDなどの指示あり**

この依頼は、ソフトウェア開発における「アーキテクチャの有無」がVibe-Codingの成果に与える影響を検証するための**実験計画と記録ルール**を定義し、必要な**記録ファイル**を準備することです。

## 1. 検証の目的と二つのグループ

**目的:** アーキテクチャあり/なしのVibe-Codingで開発されたコードベースの「効率」と「品質」を比較検証する。

**比較グループ:**
1.  **グループ A (No-Arch):** アーキテクチャの指示なし。
2.  **グループ B (With-Arch):** クリーンアーキテクチャ/DDDなどの指示あり。

## 2. 定量的な検証項目（機能開発単位）

検証は、アプリケーションの**機能開発（タスク）単位**で実施し、以下の項目を計測・記録します。

| カテゴリ | 項目 | 測定内容 | 検証フェーズ |
| :--- | :--- | :--- | :--- |
| **効率 (開発)** | 実行時間 (T_exec) | Vibe-Codingプロンプト入力からコードが動作するまでの時間（分）。 | 開発 |
| **品質 (開発)** | コード品質評価 (Q_dev) | Linter/Formatterの警告数、テストカバレッジの達成度 (%)。 | 開発 |
| **保守性 (変更)** | 変更タスク完了時間 (T_maint) | 仕様変更タスク完了までの実測時間（分）。 | 保守 |
| **保守性 (変更)** | 変更行数 (LOC_churn) | 変更/追加/削除したコードの行数。 | 保守 |
| **品質 (変更)** | 欠陥発生数 (Defects) | 変更タスク実行中に発見された新たなバグの数。 | 保守 |
| **理解度 (セルフ)** | 構造理解スコア (S_under) | 忘却期間後のセルフレビューによる5段階評価（1:低〜5:高）。 | 保守 |

## 3. 必要な記録ファイルとルール

上記測定項目を記録し、実験の再現性を高めるためのファイルを生成してください。

### 3.1. 実験記録シート (`experiment_log.csv`)

すべてのタスク結果を記録するため、以下のヘッダーを持つCSVファイルを生成してください。

**ヘッダー:**
`Task_ID`, `Group`, `Description`, `T_exec`, `Q_dev_Warnings`, `Q_dev_Coverage`, `T_maint`, `LOC_churn`, `Defects`, `S_under`

### 3.2. 計測補助ファイル (`measure_tools.sh`)

変更行数（LOC_churn）の計測を容易にするために、指定した**2つのディレクトリ間の差分行数**（追加、削除、変更の合計）を算出するシンプルなシェルスクリプトを生成してください。

**機能:** `diff` コマンドや `git diff` を応用し、指定された2つのファイルまたはディレクトリ間の変更行数を集計します。スクリプトは、2つのパスを引数として受け取るようにしてください。

### 3.3. プロンプト記録ファイル (`prompts_log.md`)

すべての開発タスクプロンプトを時系列で記録するためのファイルです。各プロンプトにはタスクIDとタイムスタンプを付与して管理します。

## 4. 開発タスク実行時の作業フロー

**重要: アプリケーション開発のプロンプトを受け取った際は、以下のワークフローに従って作業を行うこと:**

### 4.1. プロンプト記録フェーズ
1. **タスクID生成**: `TASK_XXX` 形式でタスクIDを生成（XXXは連番）
2. **プロンプト記録**: 受け取ったプロンプトの全文を `prompts_log.md` に以下の形式で記録
   ```
   ---
   Task_ID: TASK_XXX
   Timestamp: YYYY-MM-DD HH:MM:SS
   ---
   [プロンプトの全文]
   ---
   ```
3. **開始時刻記録**: T_exec計測のため開始時刻をメモ

### 4.2. 開発実行フェーズ
1. **プロンプトの内容に従って開発を実行**
2. **クリーンアーキテクチャ/DDDの原則を適用**（このリポジトリはWith-Archグループ）
3. **必要に応じて計測項目を記録**

### 4.3. 結果記録フェーズ
1. **実行時間計測**: タスク完了時にT_execを計算
2. **結果記録**: `experiment_log.csv` に計測結果を追記
3. **グループ列には `With-Arch` を記入**

## 5. 実行依頼

上記の要件に基づき、以下の3つのファイルを生成してください。

* `experiment_log.csv` ✅ 生成済み
* `measure_tools.sh` ✅ 生成済み
* `prompts_log.md` ✅ 生成済み
